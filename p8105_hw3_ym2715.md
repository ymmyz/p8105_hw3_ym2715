p8105\_hw3\_ym2715
================
Yizhi Ma
10/15/2018

Problem 1
---------

``` r
brfss_smart2010 = p8105.datasets::brfss_smart2010

brfss_overall_health = brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  rename(state = locationabbr) %>% 
  select(year, state, location_desc = locationdesc, topic, response, data_value) %>% 
  filter(topic == "Overall Health") %>% 
  filter(response == "Excellent" | response == "Very good" | response == "Good" | response == "Fair" | response == "Poor") %>% 
  arrange(factor(response, c("Excellent", "Very good", "Good", "Fair", "Poor"))) 
```

Question 1

``` r
brfss_overall_health %>% 
  filter(year == 2002) %>% 
  distinct(location_desc, .keep_all = TRUE) %>% 
  group_by(state) %>% 
  mutate(location_num = n()) %>% 
  distinct(state, location_num) %>% 
  filter(location_num == 7) %>% 
  knitr::kable()  
```

| state |  location\_num|
|:------|--------------:|
| CT    |              7|
| FL    |              7|
| NC    |              7|

In 2002, CT, FL, NC were observed at 7 locations.

``` r
spaghetti = brfss_overall_health %>% 
  select(year, state, location_desc) %>% 
  distinct(year, location_desc, .keep_all = TRUE) %>% 
  group_by(state, year) %>% 
  mutate(location_num = n()) %>% 
  distinct(year, state, location_num)

ggplot(spaghetti, aes(x= year, y = location_num, color = state)) +
  geom_point() +
  geom_line()
```

![](p8105_hw3_ym2715_files/figure-markdown_github/problem1_q2-1.png)

``` r
ny_response = brfss_overall_health %>% 
  filter(state == "NY" & response == "Excellent") %>% 
  filter(year %in% c(2002, 2006, 2010)) 

ny_mean = aggregate(ny_response[, 6], list(ny_response$location_desc), mean) %>% 
  rename(mean = data_value, location = Group.1)
ny_sd = aggregate(ny_response[, 6], list(ny_response$location_desc), sd) %>% 
  rename(sd = data_value, location = Group.1)
ny_mean_sd = left_join(ny_mean, ny_sd, by = "location")

knitr::kable(ny_mean_sd)
```

| location                |      mean|         sd|
|:------------------------|---------:|----------:|
| NY - Bronx County       |  17.60000|         NA|
| NY - Erie County        |  17.20000|         NA|
| NY - Kings County       |  20.36667|  1.7672955|
| NY - Monroe County      |  22.40000|         NA|
| NY - Nassau County      |  24.93333|  2.8219379|
| NY - New York County    |  27.50000|  1.5394804|
| NY - Queens County      |  19.63333|  1.3576941|
| NY - Suffolk County     |  24.10000|  3.2787193|
| NY - Westchester County |  26.45000|  0.6363961|

Problem3
--------

``` r
instacart = p8105.datasets::instacart %>% 
  janitor::clean_names()
```

``` r
instacart %>% 
  group_by(aisle) %>% 
  mutate(aisle_count = n()) %>% 
  select(aisle, aisle_count) %>% 
  distinct(aisle, .keep_all = TRUE) %>% 
  arrange(desc(aisle_count))
```

    ## # A tibble: 134 x 2
    ## # Groups:   aisle [134]
    ##    aisle                         aisle_count
    ##    <chr>                               <int>
    ##  1 fresh vegetables                   150609
    ##  2 fresh fruits                       150473
    ##  3 packaged vegetables fruits          78493
    ##  4 yogurt                              55240
    ##  5 packaged cheese                     41699
    ##  6 water seltzer sparkling water       36617
    ##  7 milk                                32644
    ##  8 chips pretzels                      31269
    ##  9 soy lactosefree                     26240
    ## 10 bread                               23635
    ## # ... with 124 more rows
